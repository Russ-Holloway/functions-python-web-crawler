╔════════════════════════════════════════════════════════════════════════════╗
║              CORRECTED DEPLOYMENT COMMANDS - Phase 1                       ║
║            (Using correct resource names from reference file)              ║
╚════════════════════════════════════════════════════════════════════════════╝

⚠️  ISSUE IDENTIFIED
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Previous commands used INCORRECT resource group name:
❌ rg-btp-uksp-prod-crawler-01  (WRONG - does not exist)

CORRECT resource group name (from AZURE_RESOURCE_REFERENCE.md):
✅ rg-btp-uks-prod-doc-mon-01   (CORRECT)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 CORRECT AZURE RESOURCE NAMES
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Resource Group:   rg-btp-uks-prod-doc-mon-01
Function App:     func-btp-uks-prod-doc-crawler-01
Storage Account:  stbtpuksprodcrawler01
Subscription ID:  96726562-1726-4984-88c6-2e4f28878873

🚀 CORRECTED DEPLOYMENT COMMANDS (Copy & Paste)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 1. Set variables with CORRECT names
RESOURCE_GROUP="rg-btp-uks-prod-doc-mon-01"
FUNCTION_APP="func-btp-uks-prod-doc-crawler-01"
SUBSCRIPTION="96726562-1726-4984-88c6-2e4f28878873"
ZIP_FILE="phase1-deployment.zip"

# 2. Deploy to Azure
az functionapp deployment source config-zip \
  --resource-group $RESOURCE_GROUP \
  --name $FUNCTION_APP \
  --subscription $SUBSCRIPTION \
  --src $ZIP_FILE

# 3. Restart function app
az functionapp restart \
  --resource-group $RESOURCE_GROUP \
  --name $FUNCTION_APP

# 4. Stream logs
az functionapp log tail \
  --resource-group $RESOURCE_GROUP \
  --name $FUNCTION_APP

✅ VERIFICATION COMMANDS
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Check deployment status
az functionapp show \
  --resource-group $RESOURCE_GROUP \
  --name $FUNCTION_APP \
  --query "state" -o tsv

# Count storage documents
STORAGE_ACCOUNT="stbtpuksprodcrawler01"
CONTAINER="documents"

az storage blob list \
  --account-name $STORAGE_ACCOUNT \
  --container-name $CONTAINER \
  --auth-mode login \
  --query "length([?name!='document-hashes.json' && name!='crawl_history.json'])" \
  --output tsv

# View dashboard
echo "https://$FUNCTION_APP.azurewebsites.net/api/dashboard"

📝 CHANGES MADE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ Updated .github/copilot-instructions.md to ALWAYS reference:
   AZURE_RESOURCE_REFERENCE.md for correct resource names

✅ Updated PHASE-1-DEPLOYMENT-BASH.md with correct names

✅ Updated DEPLOY-QUICK-START.txt with correct names

✅ Created this corrected command file

⚠️  IMPORTANT REMINDER
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

ALWAYS reference AZURE_RESOURCE_REFERENCE.md for the correct resource names.
The naming convention is:
  - Function App: func-btp-uks-prod-doc-crawler-01 (note: "uks" not "uksp")
  - Resource Group: rg-btp-uks-prod-doc-mon-01 (monitoring resource group)
  - Storage: stbtpuksprodcrawler01 (no hyphens in storage names)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Ready to Deploy with CORRECT Resource Names | October 17, 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
